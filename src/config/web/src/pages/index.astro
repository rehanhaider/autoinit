---
import Layout from "../layouts/Layout.astro";
import Navbar from "../components/Navbar.astro";
import Footer from "../components/Footer.astro";
import UserStatsChart from "../components/UserStatsChart.jsx";

// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.
---

<Layout>
    <header class="shadow-xl bg-base-100 z-10 relative">
        <Navbar />
    </header>
    <main class="flex-grow flex flex-wrap lg:flex-nowrap gap-8 p-8 bg-base-300">
        {/* Left Panel (adjusts width based on screen size) */}
        <div class="w-full lg:w-2/3 flex flex-col gap-8">
            {/* User Statistics Card - Use neutral background */}
            <div class="card bg-neutral text-neutral-content shadow-xl">
                <div class="card-body">
                    {/* Flex container for title and filters */}
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="card-title text-xl">User Statistics</h2>
                        {/* Filter buttons - removed justify-end from outer div, using flex justify-between on parent */}
                        <div class="btn-group">
                            <button class="btn btn-sm btn-outline">Daily</button>
                            <button class="btn btn-sm btn-outline btn-active">Weekly</button>
                            <button class="btn btn-sm btn-outline">Monthly</button>
                            <button class="btn btn-sm btn-outline">Yearly</button>
                        </div>
                    </div>
                    {/* Replace placeholder div with the chart component */}
                    <div class="mt-4">
                        {/* Added margin-top for spacing */}
                        <UserStatsChart client:load />
                    </div>
                </div>
            </div>

            {/* Source Health Card */}
            <div class="card bg-neutral text-neutral-content shadow-xl flex-grow">
                <div class="card-body">
                    <h2 class="card-title text-xl mb-4">Source Health</h2>
                    {/* Placeholder for table or status */}
                    <div class="alert alert-success shadow-lg mt-2">
                        <div>
                            <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"
                                ><path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg
                            >
                            <span>All systems operational.</span>
                        </div>
                    </div>
                    {
                        /* Example of error state:
                    <div class="alert alert-error shadow-sm mt-2">
                        <div>
                            <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2 2m2-2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            <span>Source 'XYZ News' is reporting errors.</span>
                        </div>
                    </div>
                    <div class="overflow-x-auto mt-4">
                        <table class="table table-zebra w-full">
                            <thead>
                                <tr>
                                    <th>Source Name</th>
                                    <th>Status</th>
                                    <th>Last Checked</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="hover">
                                    <td>Example News 1</td>
                                    <td><span class="badge badge-error">Error</span></td>
                                    <td>2 minutes ago</td>
                                </tr>
                                <tr class="hover">
                                    <td>Example News 2</td>
                                    <td><span class="badge badge-warning">Warning</span></td>
                                    <td>1 hour ago</td>
                                </tr>
                            </tbody>
                        </table>
                    </div> */
                    }
                </div>
            </div>
        </div>

        {/* Right Panel (adjusts width based on screen size) */}
        <div class="w-full lg:w-1/3">
            <div class="card bg-neutral text-neutral-content shadow-xl h-full">
                <div class="card-body items-center justify-center text-center">
                    <h2 class="card-title text-xl mb-2">Manage Sources</h2>
                    <p class="text-neutral-content/80 mb-6">Add or manage news sources for the platform.</p>
                    <div class="card-actions justify-center">
                        <a href="/add-news" class="btn btn-primary">Add New Source</a>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer class="bg-neutral text-neutral-content">
        <Footer />
    </footer>
</Layout>
